<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Minibadge Directory</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bulma CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@1.0.0/css/bulma.min.css"
  />
</head>
<body>
  <!-- Page header -->
  <section class="section">
    <div class="container">
      <h1 class="title">Minibadge Directory</h1>
      <p class="subtitle">
        Community-submitted SAINTCON minibadges.
        <!-- Replace this with your real submission link (Form / Issue Form, etc) -->
        <a href="{{SUBMIT_URL}}" target="_blank" rel="noopener">
          Submit your badge
        </a>
      </p>

      <!-- Filter / search controls -->
      <div class="box">
        <div class="columns is-multiline">
          <!-- Search -->
          <div class="column is-12-tablet is-6-desktop">
            <div class="field">
              <label class="label">Search</label>
              <div class="control">
                <input
                  class="input search"
                  type="text"
                  placeholder="Search by title, author, description, etc."
                  id="searchInput"
                />
              </div>
            </div>
          </div>

          <!-- Category filter (auto-populated) -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Category</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select name="category" id="categoryFilter">
                    <option value="">All categories</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Conference year filter (auto-populated) -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Conference year</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select name="conferenceYear" id="yearFilter">
                    <option value="">All years</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Soldering difficulty filter (auto-populated) -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Soldering difficulty</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select name="SolderingDifficulty" id="difficultyFilter">
                    <option value="">All difficulties</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Author filter (auto-populated) -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Author</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select name="author" id="authorFilter">
                    <option value="">All authors</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Sort control -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Sort by</label>
              <div class="control">
                <div class="select is-fullwidth">
                  <select name="sort" id="sortSelect">
                    <option value="item-timestamp:desc">Newest first</option>
                    <option value="item-timestamp:asc">Oldest first</option>
                    <option value="item-title:asc">Title A → Z</option>
                    <option value="item-title:desc">Title Z → A</option>
                    <option value="item-author:asc">Author A → Z</option>
                    <option value="item-author:desc">Author Z → A</option>
                    <option value="item-quantityMade:num-asc">Fewest made</option>
                    <option value="item-quantityMade:num-desc">Most made</option>
                  </select>
                </div>
              </div>
            </div>
          </div>

          <!-- Clear filters + results count (own column, inline with others) -->
          <div class="column is-6-tablet is-3-desktop">
            <div class="field">
              <label class="label">Filters</label>
              <div class="field is-grouped is-justify-content-space-between is-align-items-center">
                <div class="control">
                  <button
                    class="button is-light is-small"
                    id="clearFiltersButton"
                    type="button"
                  >
                    Clear filters
                  </button>
                </div>
                <div class="control is-flex-grow-1 has-text-right">
                  <p id="resultsCount" class="help">
                    <!-- Filled by JS -->
                  </p>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- Card template -->
      <template id="minibadge-template">
        <article class="card minibadge-card">
          <div class="card-content">
            <div class="media">
              <div class="media-left">
                <figure class="image is-48x48">
                  <img
                    loading="lazy"
                    class="is-rounded item-profilePictureUrl"
                    src=""
                    alt=""
                  >
                </figure>
              </div>
              <div class="media-content">
                <p class="title is-4 item-title"></p>
                <p class="subtitle is-6">
                  by
                  <span class="has-text-weight-semibold item-author"></span>
                </p>
                <div class="tags are-small">
                  <span class="tag is-info">
                    Type:
                    <span class="item-category"></span>
                  </span>

                  <span class="tag is-primary is-light">
                    Year:
                    <span class="item-conferenceYear"></span>
                  </span>

                  <span class="tag difficulty-tag">
                    Difficulty:
                    <span class="item-solderingDifficulty"></span>
                  </span>

                  <!-- Hidden numeric value for sorting/filtering -->
                  <span class="item-quantityMade" style="display:none;"></span>

                  <!-- Visible quantity -->
                  <span class="tag is-light">
                    Run:
                    <span class="item-quantityDisplay"></span>
                  </span>

                  <span class="tag is-light">
                    PCB:
                    <span class="item-boardHouse"></span>
                  </span>
                </div>
              </div>
            </div>

            <div class="columns is-variable is-4 mt-3">
              <div class="column is-4">
                <figure class="image mb-3">
                  <img
                    loading="lazy"
                    class="item-frontImageUrl"
                    src=""
                    alt=""
                  >
                </figure>
                <figure class="image">
                  <img
                    loading="lazy"
                    class="item-backImageUrl"
                    src=""
                    alt=""
                  >
                </figure>
              </div>

              <div class="column">
                <div class="content item-description"></div>

                <div class="mb-2">
                  <details>
                    <summary class="has-text-weight-semibold">
                      Special instructions
                    </summary>
                    <div class="content item-specialInstructions mt-2"></div>
                  </details>
                </div>

                <div class="mb-2">
                  <details>
                    <summary class="has-text-weight-semibold">
                      Assembly &amp; soldering instructions
                    </summary>
                    <div class="content item-solderingInstructions mt-2"></div>
                  </details>
                </div>

                <div class="mb-2">
                  <details>
                    <summary class="has-text-weight-semibold">
                      How do people get one?
                    </summary>
                    <div class="content item-howToAcquire mt-2"></div>
                  </details>
                </div>

                <p class="is-size-7 has-text-grey-light item-timestamp mt-3"></p>
              </div>
            </div>
          </div>
        </article>
      </template>

      <!-- Badge list container for List.js -->
      <div id="items-list">
        <div class="minibadge-list list">
          <!-- Cards will be injected here from minibadges.json -->
        </div>

        <!-- Shown when filters/search hide everything -->
        <p
          id="emptyMessage"
          class="has-text-centered is-italic mt-4"
          style="display:none;"
        >
          No minibadges match your filters yet.
        </p>
      </div>
    </div>
  </section>

  <!-- List.js -->
  <script src="https://cdn.jsdelivr.net/npm/list.js@2.3.1/dist/list.min.js"></script>
  <!-- Your custom logic -->
  <script src="code.js"></script>
</body>
</html>
